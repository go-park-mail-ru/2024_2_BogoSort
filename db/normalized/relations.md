# Нормализация

### Таблица пользователя
Таблица, описывающая параметры сущности пользователя
```
Relation user:

{id} -> username, email, phone_number, password_hash, password_salt, image_id, status, created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты username, email, phone_number, password_hash, password_salt, image_id, status, created_at, updated_at атомарны, и у каждого пользователя есть уникальный идентификатор id.
- 2НФ: Все неключевые атрибуты зависят от всего первичного ключа id.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от первичного ключа id.
- НФБК: 3НФ +  все функциональные зависимости имеют в левой части только суперключ id.

### Таблица продавца
Таблица, описывающая продавца
```
Relation seller:

{id, user_id} -> description, created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, включая description, created_at и updated_at. Таблица имеет уникальный составной ключ {id, user_id}.
- 2НФ: Все неключевые атрибуты description, created_at, updated_at зависят от всего составного ключа {id, user_id}.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от первичного ключа {id, user_id}.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ {id, user_id} в левой части.

### Таблица подписки
Таблица, связывающая покупателя и продавца
```
Relation subscription:

{id, user_id, seller_id} -> created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, и таблица имеет составной ключ {id, user_id, seller_id}.
- 2НФ: Все неключевые атрибуты created_at, updated_at зависят от всего составного ключа {id, user_id, seller_id}.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от всего первичного ключа {id, user_id, seller_id}.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ {id, user_id, seller_id} в левой части.

### Таблица объявлений
Таблица, определяющая параметры объявления
```
Relation advert:

{id} -> title, description, price, image_id, category_id, has_delivery, location, status, seller_id, created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны title, description, price и другие, и у каждого объявления есть уникальный идентификатор (id).
- 2НФ: Все неключевые атрибуты зависят от всего первичного ключа id.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от первичного ключа id.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ id в левой части.

### Таблица сохраненных объявлений
Таблица объявления, добавленного в избранное пользователем
```
Relation saved_advert:

{id, user_id, advert_id} -> created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, включая created_at и updated_at, и таблица имеет уникальный составной ключ {id, user_id, advert_id}.
- 2НФ: Все неключевые атрибуты created_at, updated_at зависят от всего составного ключа {id, user_id, advert_id}.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от всего первичного ключа {id, user_id, advert_id}.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ {id, user_id, advert_id} в левой части.

### Таблица корзины
Таблица, создающая корзину для пользователя
```
Relation cart:

{id, user_id} -> created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, включая created_at и updated_at. Таблица имеет составной ключ {id, user_id}.
- 2НФ: Все неключевые атрибуты created_at, updated_at зависят от всего составного ключа {id, user_id}.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от первичного ключа {id, user_id}.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ {id, user_id} в левой части.

### Таблица связи между корзиной и объявлениями
Таблица, связывающая корзину с объявлениями
```
Relation cart_advert:

{id, cart_id, advert_id} -> created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, и таблица имеет составной ключ {id, cart_id, advert_id}.
- 2НФ: Все неключевые атрибуты created_at, updated_at зависят от всего составного ключа {id, cart_id, advert_id}.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от всего первичного ключа {id, cart_id, advert_id}.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ {id, cart_id, advert_id} в левой части.

### Таблица покупок
Таблица, описывающая статус и содержимое покупок
```
Relation purchase:

{id, cart_id} -> status, created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, включая status, created_at, updated_at. Таблица имеет уникальный ключ {id, cart_id}.
- 2НФ: Все неключевые атрибуты status, created_at, updated_at зависят от всего составного ключа {id, cart_id}.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от всего первичного ключа {id, cart_id}.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ {id, cart_id} в левой части.

### Таблица категорий
Таблица, описывающая категории объявлений
```
Relation category:

{id} -> title, created_at, updated_at
```

Нормальные формы:
- 1НФ: Все атрибуты атомарны, включая title, created_at, updated_at. Таблица имеет уникальный ключ id.
- 2НФ: Все неключевые атрибуты title, created_at, updated_at зависят от всего первичного ключа id.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от первичного ключа id.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ id в левой части.

### Таблица для хранения статических файлов
```
Relation static:

{id} -> name, path, created_at, updated_at
```
Нормальные формы:
- 1НФ: Все атрибуты атомарны, включая name, path, created_at, updated_at. Таблица имеет уникальный ключ id.
- 2НФ: Все неключевые атрибуты (name, path, created_at, updated_at) зависят от всего первичного ключа id.
- 3НФ: Нет транзитивных зависимостей, все неключевые атрибуты зависят только от первичного ключа id.
- НФБК: 3НФ + Все функциональные зависимости имеют суперключ id в левой части.